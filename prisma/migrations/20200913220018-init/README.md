# Migration `20200913220018-init`

This migration has been generated by kenneth-rosario at 9/13/2020, 6:00:18 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "University" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL,
    "location" TEXT NOT NULL
)

CREATE TABLE "StudyProgram" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL
)

CREATE TABLE "Student" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL,
    "email" TEXT NOT NULL,
    "passwordHash" TEXT NOT NULL,
    "studyProgramId" INTEGER NOT NULL,
    "univeristyId" INTEGER NOT NULL,

    FOREIGN KEY ("studyProgramId") REFERENCES "StudyProgram"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("univeristyId") REFERENCES "University"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE TABLE "Report" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "reasons" TEXT NOT NULL,
    "reviewId" INTEGER NOT NULL,
    "studentId" INTEGER NOT NULL,

    FOREIGN KEY ("reviewId") REFERENCES "Review"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("studentId") REFERENCES "Student"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE TABLE "Company" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "name" TEXT NOT NULL,
    "imageUrl" TEXT NOT NULL
)

CREATE TABLE "Review" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "recommendation" TEXT NOT NULL,
    "interviewQuestions" TEXT NOT NULL,
    "dateCreated" DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "anonymous" BOOLEAN NOT NULL DEFAULT false,
    "experienceType" TEXT NOT NULL,
    "seekingDegree" TEXT NOT NULL,
    "helpfulScore" INTEGER NOT NULL,
    "location" TEXT NOT NULL,
    "salary" INTEGER NOT NULL,
    "duration" INTEGER NOT NULL,
    "interviewDifficultyRating" INTEGER NOT NULL,
    "acceptedStatus" BOOLEAN NOT NULL DEFAULT false,
    "experienceRating" INTEGER NOT NULL,
    "reviewTitle" TEXT NOT NULL,
    "studyProgramId" INTEGER NOT NULL,
    "universityId" INTEGER NOT NULL,
    "companyId" INTEGER NOT NULL,
    "authorId" INTEGER NOT NULL,

    FOREIGN KEY ("studyProgramId") REFERENCES "StudyProgram"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("universityId") REFERENCES "University"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("companyId") REFERENCES "Company"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("authorId") REFERENCES "Student"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE TABLE "Rating" (
    "id" INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
    "helpfulRate" INTEGER NOT NULL,
    "reviewId" INTEGER NOT NULL,
    "studentId" INTEGER NOT NULL,

    FOREIGN KEY ("reviewId") REFERENCES "Review"("id") ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY ("studentId") REFERENCES "Student"("id") ON DELETE CASCADE ON UPDATE CASCADE
)

CREATE UNIQUE INDEX "University.name_unique" ON "University"("name")

CREATE UNIQUE INDEX "StudyProgram.name_unique" ON "StudyProgram"("name")

CREATE UNIQUE INDEX "Student.email_unique" ON "Student"("email")

CREATE UNIQUE INDEX "Company.name_unique" ON "Company"("name")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200913220018-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,91 @@
+// This is your Prisma schema file,
+// learn more about it in the docs: https://pris.ly/d/prisma-schema
+
+datasource db {
+  provider = "sqlite"
+  url = "***"
+}
+
+generator client {
+  provider = "prisma-client-js"
+}
+
+model University {
+  id Int @default(autoincrement()) @id
+  name String @unique
+  location String 
+}
+
+model StudyProgram {
+  id Int @default(autoincrement()) @id
+  name String @unique
+}
+
+model Student {
+  id Int @default(autoincrement()) @id  
+  name String 
+  email String @unique
+  passwordHash String
+
+  studyprogram StudyProgram @relation(fields: [studyProgramId], references: [id])
+  studyProgramId Int
+  university University @relation(fields: [univeristyId], references: [id])
+  univeristyId Int 
+}
+
+model Report {
+  id Int @default(autoincrement()) @id
+  reasons String
+
+  review Review @relation(fields: [reviewId], references: [id])
+  reviewId Int
+  student Student @relation(fields: [studentId], references: [id])
+  studentId Int 
+
+}
+
+model Company {
+  id Int @default(autoincrement()) @id
+  name String @unique
+  imageUrl String 
+}
+
+model Review {
+  id Int @default(autoincrement()) @id
+  recommendation String
+  interviewQuestions String
+  dateCreated DateTime @default(now())
+  anonymous Boolean @default(false)
+  experienceType String 
+  seekingDegree String 
+  helpfulScore Int
+  location String 
+  salary Int
+  duration Int
+  interviewDifficultyRating Int
+  acceptedStatus Boolean @default(false)
+  experienceRating Int
+  reviewTitle String
+
+  studyProgram StudyProgram @relation(fields: [studyProgramId], references: [id])
+  studyProgramId Int
+  university University @relation(fields: [universityId], references: [id])
+  universityId Int 
+  company Company @relation(fields: [companyId], references: [id])
+  companyId Int
+  author Student @relation(fields: [authorId], references: [id])
+  authorId Int 
+  
+}
+
+model Rating {
+  id Int @default(autoincrement()) @id
+  helpfulRate Int 
+
+  review Review @relation(fields: [reviewId], references: [id])
+  reviewId Int
+  student Student @relation(fields: [studentId], references: [id])
+  studentId Int 
+}
+
+
```


